apply plugin: "curseforge"

curse {
    projectId = "233029"
    relatedProject 'guide-api': 'optionalLibrary'

    if (System.getenv().RELEASE) {
        releaseType = 'beta'
        //changelog = new File("resources/changelog/${project.version}.txt").text
    } else {
        releaseType = 'alpha'
        changelog = "This version should not be used in your 'productive' world. It contains the latest features, but also the latest bugs.\n Probably not all features are finished.\n To see what might have changed visit our Github page and browse the latest commits."
    }

    if(project.hasProperty("curseforge_key")) {
        apiKey = project.curseforge_key
    } else if(System.getenv().CI) {
        apiKey = System.getenv().CURSEFORGE_KEY_SECRET
    }
    else{
        apiKey = ''
    }
    displayName= "Vampirism-${config.minecraft_version}-${project.mod_version}"
    addGameVersion config.minecraft_version
    additionalArtifact devJar
}